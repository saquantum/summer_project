<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8" />
    <title>demo</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: auto; }
        input, button { padding: 8px; margin-right: 10px; border: 1px solid #ccc; border-radius: 4px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
<div id="app">
    <div>
        <input v-model="query.city" placeholder="city">
        <input v-model="query.county" placeholder="county">
        <button @click="search">Search</button>
    </div>

    <table v-if="results.length">
        <thead>
        <tr>
            <th>ID</th>
            <th>City</th>
            <th>County</th>
        </tr>
        </thead>
        <tbody>
        <tr v-for="item in results" :key="item.id">
            <td>{{ item.id }}</td>
            <td>{{ item.city }}</td>
            <td>{{ item.county }}</td>
        </tr>
        </tbody>
    </table>
    <p v-else>No result found</p>
</div>

<script>
    const { createApp, ref } = Vue

    createApp({
        setup() {
            const query = ref({ city: '', county: '' })
            const results = ref([])

            const search = async () => {
                const body = (query.value.city || query.value.county)
                    ? JSON.stringify(query.value)
                    : JSON.stringify({})
                const res = await fetch('http://localhost:8080/locations/search', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body
                })

                const data = await res.json()
                results.value = data.data
            }

            return { query, results, search }
        }
    }).mount('#app')
</script>
</body>
</html>
